/dts-v1/;

#include "ast2400.dtsi"

/ {
	model = "Palmetto BMC";
	compatible = "tyan,palmetto-bmc", "aspeed,ast2400";

	ahb {
		fmc@1e620000 {
			reg = < 0x1e620000 0x94
				0x20000000 0x02000000 >;
			#address-cells = <1>;
			#size-cells = <0>;
			compatible = "aspeed,fmc";
			bmc@0 {
				reg = < 0 >;
				compatible = "jedec,spi-nor" ;
				label = "bmc0";
				/*
				 * Possibly required props:
				 * spi-max-frequency = <>
				 * spi-tx-bus-width = <>
				 * spi-rx-bus-width  = <>
				 * m25p,fast-read
				 * spi-cpol if inverse clock polarity (CPOL)
				 * spi-cpha if shifted clock phase (CPHA)
				 */
				#address-cells = < 1 >;
				#size-cells = < 1 >;
				u-boot {
					reg = < 0 0x60000 >;
					label = "u-boot";
				};
				u-boot-env {
					reg = < 0x60000 0x20000 >;
					label = "u-boot-env";
				};
				kernel  {
					reg = < 0x80000 0x280000 >;
					label = "kernel";
				};
				initrd  {
					reg = < 0x300000 0x1d00000 >;
					label = "initrd";
				};
			};
		};
		spi@1e630000 {
			reg = < 0x1e630000 0x18
				0x30000000 0x02000000 >;
			#address-cells = <1>;
			#size-cells = <0>;
			compatible = "aspeed,smc";
			pnor {
				reg = < 0 >;
				compatible = "jedec,spi-nor" ;
				label = "pnor";
				/* spi-max-frequency = <>; */
				/* m25p,fast-read; */
			};
		};
		apb {
			i2c: i2c@1e78a040 {
				i2c0: i2c-bus@40 {
					eeprom@50 {
						compatible = "atmel,24c256";
						reg = <0x50>;
						pagesize = <64>;
					};
					rtc@68 {
						compatible = "dallas,ds3231";
						reg = <0x68>;
						// interrupts = <GPIOF0>
					};
				};

				i2c2: i2c-bus@c0 {
					tmp423@4c {
						compatible = "ti,tmp423";
						reg = <0x4c>;
					};
				};
			};
		};
	};
};
